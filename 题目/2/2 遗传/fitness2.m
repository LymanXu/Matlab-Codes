function f=fitness2(a)
yuan=[17	0	45	20	9	125	2 1
14	5	45	10	6	191	3 2
15	2	40	20	9	176	5 3
16	0	40	20	5	182	5.385164807 4
12	8	45	20	6	125	6 5
11	8	40	40	10	197	7.810249676 6
10	10	40	30	10	145	9.433981132 7
13	5	35	10	10	151	10.44030651 8
76	8	56	27	9	195	12.52996409 9
9	10	35	20	9	143	12.80624847 10
71	2	60	5	9	119	15 11
51	20	50	5	10	196	18.68154169 12
58	15	60	17	8	151	19.84943324 13
85	12	24	13	10	149	23.2594067 14
77	6	68	30	10	104	23.34523506 15
57	10	20	19	10	152	26.2488095 16
95	4	18	35	8	184	27.07397274 17
84	21	24	28	6	155	28.31960452 18
72	20	20	8	8	160	30.8058436 19
7	15	75	20	5	170	32.69556545 20
6	18	75	20	6	126	34 21
8	15	80	10	5	195	37.33630941 22
56	15	10	20	8	137	37.33630941 23
45	18	80	10	5	153	38.48376281 24
4	20	80	40	9	127	39.35733731 25 
73	5	5	16	5	196	40.11234224 26
44	20	82	10	5	196	41.14608122 27
5	20	85	20	6	196	43.8634244 28
75	23	3	7	8	138	46.95742753 29
];
for i=1:29
    for j=1:29
        if yuan(j,8)==a(i)
            b(i,:)=yuan(j,:);
        end
    end
end
t=120;
k=0;
l=zeros(29,1);
l(1)=sqrt((b(1,2)-2)^2+(b(1,3)-45)^2);
xht=zeros(29,1);
xht(1)=b(1,5);
p=0;
for i=2:27
    if(i==p)
        continue
    end
    t=t-b(i,4);
    if t==0
        q=0;
        k=k+1;
        d(k,:)=[i+1,b(i+1,1)];
        l(i)=l(i-1)+sqrt((b(i-1,2)-b(i,2))^2+(b(i-1,3)-b(i,3))^2);
        zl(k)=l(i)+sqrt((b(i+1,2)-2)^2+(b(i+1,3)-45)^2);%每趟总路程
        l(i+1)=sqrt((b(i+1,2)-2)^2+(b(i+1,3)-45)^2);
        xht(i)=xht(i-1)+b(i,5);
        xht(i+1)=xht(i)+t*b(i+1,5)/b(i+1,4);
        tt(k)=xht(i+1);%每趟总卸货时间
        xht(i+1)=(b(i+1,4)-t)*b(i+1,5)/b(i+1,4);
        t=150-b(i+1,4)+t;
        p=i+1;
        i=i+2;
    end
    if i>28
        break
    end
    if t>0 && t<b(i+1,4)
        k=k+1;
        d(k,:)=[i+1,b(i+1,1)];
        l(i)=l(i-1)+sqrt((b(i-1,2)-b(i,2))^2+(b(i-1,3)-b(i,3))^2);
        l(i+1)=l(i)+sqrt((b(i+1,2)-b(i,2))^2+(b(i+1,3)-b(i,3))^2);
        zl(k)=l(i+1)+sqrt((b(i+1,2)-2)^2+(b(i+1,3)-45)^2);%每趟总路程
        l(i+1)=sqrt((b(i+1,2)-2)^2+(b(i+1,3)-45)^2);
        xht(i)=xht(i-1)+b(i,5);
        xht(i+1)=xht(i)+t*b(i+1,5)/b(i+1,4);
        tt(k)=xht(i+1);%每趟总卸货时间
        xht(i+1)=(b(i+1,4)-t)*b(i+1,5)/b(i+1,4);
        t=150-b(i+1,4)+t;
        p=i+1;
        i=i+2;
    end
        l(i)=l(i-1)+sqrt((b(i,2)-b(i-1,2))^2+(b(i,3)-b(i-1,3))^2);
        xht(i)=xht(i-1)+b(i,5);%卸货时间
end
if b(29,4)>t
    d(k+1,:)=[29,b(29,1)];
    zl(k+1)=l(28)+sqrt((b(29,2)-2)^2+(b(29,3)-45)^2)+sqrt((b(29,2)-b(28,2))^2+(b(29,3)-b(28,3))^2);
    l(29)=2*sqrt((b(29,2)-2)^2+(b(29,3)-45)^2);
    zl(k+2)=2*sqrt((b(29,2)-2)^2+(b(29,3)-45)^2);
    tt(k+1)=xht(28)+t*b(i+1,5)/b(i+1,4);
    xht(29)=(b(29,4)-t)*b(29,5)/b(29,4);
    tt(k+2)=(b(29,4)-t)*b(29,5)/b(29,4);
end

d(k+1,:)=[29,b(29,1)];
zl(k+1)=l(28)+sqrt((b(28,2)-b(28-1,2))^2+(b(29,3)-b(29-1,3))^2)+min(zl([2:3]));
l(29)=sqrt((b(28,2)-b(28-1,2))^2+(b(29,3)-b(29-1,3))^2);
tt(k+1)=xht(28)+b(29,5)+min(tt([2:3]));
xht(32)=xht(28)+b(29,5);
for i=1:k+1
    zt(i)=(1/5.2)*zl(i)+tt(i);%每趟总时间
end
dt(1,:)=[1,b(1,1),(1/5.2)*l(1)];
for i=2:29
    dt(i,:)=[i,b(i,1),(1/5.2)*l(i)+xht(i-1)];
    if i==d(:,1)
        dt(i,:)=[i,b(i,1),max(zt(i)-(1/5.2)*sqrt((b(i,2)-2)^2+(b(i,3)-45)^2),(1/5.2)*l(i)+xht(i-1))];
    end
    if i>=d(3,1)
        for i=d(3,1):29
            dt(i,:)=[i,b(i,1),(1/5.2)*l(i)+xht(i-1)+min(zt([2:3]))];
        end
        if i==d(:,1)
            if q==0
                dt(i,:)=[i,b(i,1),(1/5.2)*l(i)+xht(i-1)];
            end
            dt(i,:)=[i,b(i,1),max(zt(i)-(1/5.2)*sqrt((b(i,2)-2)^2+(b(i,3)-45)^2),(1/5.2)*l(i)+xht(i-1))];
        end
        break
    end
end
zl=sum(zl);
for i=1:29
    a(i)=max(dt(i,3)-b(i,6),0);
end
m=1000000;
f=m*sum(a)+zl*9;
end

